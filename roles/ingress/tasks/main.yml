- name: Deploy OpenShift Route
  include_role:
    name: common
    tasks_from: install
  vars:
    template_path: "{{ item }}"
    state: "present"
  with_fileglob:
    - templates/ocp-route/*
  when:
  - ingress_type == "openshift"

- name: Deploy VirtualServices
  include_role:
    name: common
    tasks_from: install
  vars:
    template_path: "{{ item }}"
    state: "present"
  with_fileglob:
    - templates/istio-gw/*
  when: ingress_type == "istio"

- name: Deploy K8S Ingress rules
  include_role:
    name: common
    tasks_from: install
  vars:
    template_path: "{{ item }}"
    state: "present"
  with_fileglob:
    - templates/k8s-ingress/*
  when: ingress_type == "k8singress"