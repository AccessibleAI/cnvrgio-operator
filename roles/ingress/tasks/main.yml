- name: Deploy OpenShift Route
  include_role:
    name: common
    tasks_from: install
  vars:
    templatePath: "{{ item }}"
    state: "present"
  with_fileglob:
    - templates/ocp-route/*
  when:
  - ingressType == "openshift"

- name: Deploy VirtualServices
  include_role:
    name: common
    tasks_from: install
  vars:
    templatePath: "{{ item }}"
    state: "present"
  with_fileglob:
    - templates/istio-vs/*
  when: ingressType == "istio"

- name: Deploy GW
  include_role:
    name: common
    tasks_from: install
  vars:
    templatePath: "{{ item }}"
    state: "present"
  with_fileglob:
    - templates/istio-gw/*
  when: ingressType == "istio"

- name: Deploy K8S Ingress rules
  include_role:
    name: common
    tasks_from: install
  vars:
    templatePath: "{{ item }}"
    state: "present"
  with_fileglob:
    - templates/k8s-ingress/*
  when: ingressType == "k8singress"
