---
# vars file for cnvrg
conf:
  enabled: "true"
  gcpStorageSecret: "gcp-storage-secret"
  gcpKeyfileMountPath: "/tmp/gcp_keyfile"
  gcpKeyfileName: "key.json"
  defaultJobsStorageClass: ""


registry:
  name: cnvrg-registry
  url: "docker.io"
  user: ""
  password: ""

_creds: |
  '{"auths": {"{{registry.url}}": {"username":"{{registry.user}}","password":"{{ registry.password }}","auth":"{{(registry.user +':'+ registry.password) | b64encode}}"}}}'



rbac:
  role: "cnvrg-role"
  serviceAccountName: "cnvrg"
  roleBindingName: "cnvrg-role-binding"


# Config map for cnvrg-app
appConfigs:
  cnvrgStorageUseIamRole: "false"
  featureFlags: ""
  smtp:
    server: ""
    port: ""
    username: ""
    password: ""
    domain: ""
  descriptions:
    appConfigs:
      featureFlags: |
        Dynamic feature flags passed to be passed to the app as environment variables, exmpale: `--set appConfigs.featureFlags=KEY1=VAL;KEY2=VAL2`

# Secret for cnvrg-app
appSecrets:
  sentryUrl: "https://4409141e4a204282bd1f5c021e587509:dc15f684faa9479a839cf913b98b4ee2@sentry.cnvrg.io/32"
  # jwt secret
  secretKeyBase: "0d2b33c2cc19cfaa838d3c354354a18fcc92beaaa8e97889ef99341c8aaf963ad3afcf0f7c20454cabb5c573c3fc35b60221034e109f4fb651ed1415bf61e9d5"
  stsIv: "DeJ/CGz/Hkb/IbRe4t1xLg=="
  stsKey: "05646d3cbf8baa5be7150b4283eda07d"

  redisUrl: "{{'redis://'+redis.svcName}}"
  passengerAppEnv: "app"
  railsEnv: "app"
  runJobsOnSelfCluster: "true"
  defaultComputeConfig: "/opt/kube"
  defaultComputeName: "default"

  useStdout: "true"
  extractTagsFromCmd: "false"
  checkJobExpiration: "true"

  ################## shared storage configs  ###########################
  cnvrgStorageType: "minio" # minio | aws | gcp | aks
  cnvrgStorageBucket: "cnvrg-storage"
  cnvrgStorageAccessKey: "AKIAIOSFODNN7EXAMPLE"
  cnvrgStorageSecretKey: "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"

  cnvrgStorageEndpoint: "{{ (httpScheme + (minio.svcName + '.' if networking.ingressType != 'nodeport' else '')  + clusterDomain + (':'+minio.nodePort|string if networking.ingressType == 'nodeport' else ''))}}"

  ################## minio  ###########################
  minioSseMasterKey: "my-minio-key:a310aadcefdb634b748ae31225f175e3f64591f955dfc66ccc20e128a6817ff9"

  ################## azure #########################
  cnvrgStorageAzureAccessKey: ""
  cnvrgStorageAzureAccountName: ""
  cnvrgStorageAzureContainer: ""

  ################## aws ###########################
  cnvrgStorageRegion: "eastus"

  ################## gcp ###########################
  cnvrgStorageProject: ""

